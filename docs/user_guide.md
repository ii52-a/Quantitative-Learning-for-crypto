# 量化交易系统用户手册

## 目录

1. [系统概述](#系统概述)
2. [快速开始](#快速开始)
3. [策略模板](#策略模板)
4. [回测功能](#回测功能)
5. [绩效指标说明](#绩效指标说明)
6. [常见问题](#常见问题)

---

## 系统概述

### 简介

量化交易系统是一个专业的加密货币回测平台，提供多种策略模板、详细的绩效分析和友好的用户界面。

### 主要功能

- **策略模板库**：内置多种主流交易策略
- **回测引擎**：专业的回测计算引擎
- **绩效分析**：全面的绩效指标计算
- **报告导出**：支持导出详细的回测报告

### 系统要求

- Python 3.10+
- Windows / macOS / Linux
- 网络连接（获取数据）

---

## 快速开始

### 安装依赖

```bash
pip install -r requirements.txt
```

### 配置API

1. 复制配置模板：
```bash
cp .env.example .env
```

2. 编辑 `.env` 文件：
```
BINANCE_API_KEY=your_api_key
BINANCE_API_SECRET=your_api_secret
BINANCE_TESTNET=true
```

### 启动程序

```bash
# 启动用户友好界面
python -m ui.user_friendly

# 或启动完整功能界面
python -m UI.main_ui
```

---

## 策略模板

### 1. MACD趋势策略

**适用场景**：趋势行情

**策略逻辑**：
- HIST从负变正 → 金叉开多
- HIST从正变负 → 死叉平多

**参数说明**：

| 参数 | 默认值 | 说明 |
|------|--------|------|
| HIST过滤 | 0.5 | 只有HIST绝对值超过此值才触发信号 |
| 快线周期 | 12 | MACD快线EMA周期 |
| 慢线周期 | 26 | MACD慢线EMA周期 |
| 信号线周期 | 9 | MACD信号线周期 |

### 2. 趋势跟踪策略

**适用场景**：强趋势行情

**策略逻辑**：
- 价格在均线上方 + MACD金叉 → 开多
- 价格跌破均线 或 MACD死叉 → 平多

**参数说明**：

| 参数 | 默认值 | 说明 |
|------|--------|------|
| 均线周期 | 20 | 趋势判断均线周期 |
| HIST过滤 | 0.3 | MACD柱状图过滤阈值 |

### 3. 均值回归策略

**适用场景**：震荡行情

**策略逻辑**：
- RSI超卖 + 价格触及布林带下轨 → 开多
- RSI超买 或 价格触及布林带上轨 → 平多

**参数说明**：

| 参数 | 默认值 | 说明 |
|------|--------|------|
| RSI周期 | 14 | RSI计算周期 |
| 超卖阈值 | 30 | RSI超卖阈值 |
| 超买阈值 | 70 | RSI超买阈值 |
| 布林带周期 | 20 | 布林带计算周期 |
| 标准差倍数 | 2.0 | 布林带标准差倍数 |

### 4. 布林带策略

**适用场景**：波动市场

**策略逻辑**：
- 价格突破布林带下轨后回归 → 开多
- 价格突破布林带上轨后回归 → 平多

---

## 回测功能

### 操作步骤

1. **选择策略**
   - 浏览策略卡片
   - 点击选择适合的策略
   - 查看策略描述和风险等级

2. **配置参数**
   - 选择交易对（BTCUSDT、ETHUSDT等）
   - 选择K线周期（15min、30min、1h等）
   - 设置数据量（100-50000条）
   - 设置初始资金
   - 调整策略参数

3. **运行回测**
   - 点击"开始回测"按钮
   - 等待数据加载和回测执行
   - 查看回测结果

4. **分析结果**
   - 查看绩效指标
   - 查看交易记录
   - 导出报告

### 数据量建议

| K线周期 | 建议数据量 | 覆盖时间 |
|---------|-----------|----------|
| 15min | 2000+ | ~20天 |
| 30min | 1000+ | ~20天 |
| 1h | 500+ | ~20天 |
| 4h | 200+ | ~33天 |
| 1d | 100+ | ~100天 |

---

## 绩效指标说明

### 收益指标

| 指标 | 说明 |
|------|------|
| 总收益率 | 回测期间的总收益百分比 |
| 年化收益率 | 换算为年度的收益率 |

### 风险指标

| 指标 | 说明 |
|------|------|
| 最大回撤 | 从峰值到谷值的最大跌幅 |
| 年化波动率 | 收益率的年化标准差 |
| VaR(95%) | 95%置信度下的风险价值 |
| CVaR(95%) | 条件风险价值 |

### 风险调整收益

| 指标 | 说明 | 参考值 |
|------|------|--------|
| 夏普比率 | 超额收益/总风险 | >1 良好, >2 优秀 |
| 索提诺比率 | 超额收益/下行风险 | >1 良好 |
| 卡玛比率 | 年化收益/最大回撤 | >3 良好 |

### 交易统计

| 指标 | 说明 |
|------|------|
| 胜率 | 盈利交易占比 |
| 盈亏比 | 总盈利/总亏损 |
| 平均盈利 | 单笔盈利交易的平均收益 |
| 平均亏损 | 单笔亏损交易的平均损失 |

---

## 常见问题

### Q1: 数据加载失败怎么办？

**解决方案**：
1. 检查网络连接
2. 配置代理（在.env中设置USE_PROXY=true）
3. 使用VPN

### Q2: 如何选择合适的策略？

**建议**：
- **趋势行情**：选择MACD趋势策略或趋势跟踪策略
- **震荡行情**：选择均值回归策略或布林带策略
- **不确定**：先用较大数据量测试多个策略对比

### Q3: 回测结果与实盘差异大？

**原因**：
1. 回测未考虑滑点
2. 回测未考虑市场深度
3. 历史数据不能代表未来

**建议**：
- 使用保守的参数设置
- 进行多次回测验证
- 小资金实盘验证后再放大

### Q4: 如何优化策略参数？

**建议**：
1. 不要过度拟合
2. 使用样本外数据验证
3. 关注风险调整收益而非单纯收益率

### Q5: 支持哪些交易所？

目前支持：
- 币安合约（Binance Futures）
- 测试网和主网

---

## 联系支持

如有问题，请查看项目文档或提交Issue。

---

*版本: 2.0.0*
*更新日期: 2026-02-18*
