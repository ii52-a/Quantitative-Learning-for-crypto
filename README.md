
# 目的：提升代码质量、理解底层指标原理和优化系统架构，从市场情绪化交易中走出来，学习量化思想

### 📊 技术与指标深度掌握

* **MACD 指标原理掌握**：深入理解了移动平均收敛/发散指标（MACD）的计算细节：
    * **EMA (Exponential Moving Average)**：指数移动平均线的计算及意义。
    * **DIF (Difference)**：快线（短期EMA）与慢线（长期EMA）的差值计算。
    * **DEM/MACD_Signal**：DIF 线的 EMA（信号线）的计算。
    * **HIST (Histogram)**：MACD 柱的含义与计算方法 ($\text{HIST} = \text{DIF} - \text{DEM}$)。
* **Pandas 数据处理**：精通 `Series` 和 `DataFrame` 等常用类型，深入理解并掌握了索引（Index）操作、数据切片、行/列设置等高级用法，为数据处理打下了坚实基础。

### ⚙️ 软件工程与架构优化

* **单一职责原则 (SRP) 实践**：对类和方法的功能进行了严格的单一化划分，极大地避免了 **“混杂类”** 和 **“混杂方法”** 的出现。实现了数据获取、仓位管理、策略逻辑和回测执行的**模块化分离**。
* **代码规范与优美写法**：掌握了 Python 社区推崇的规范写法，提高了代码的可读性和可维护性。
* **配置管理**：学习并实践了使用独立的 `Config` 文件管理全局常量和参数，实现了配置与核心逻辑的分离。
* **异常处理与健壮性**：学习并应用了 `tenacity` 库的 `@retry` 装饰器，掌握了连接中断、SSL错误等网络不稳定情况下的**自动重试机制**，增强了数据获取的健壮性，**极力避免了代码中的数据丢失**。
* **理解python接口与java接口,typescript接口与类型定义的不同**
## 🛠️ 项目不足与未来优化方向

### 尽管项目取得了显著进步，但在工程细节上仍有提升空间，主要集中在命名规范上。

| 区域 | 不足描述 | 改进目标 |
| :--- | :--- | :--- |
| **命名规范** | 在项目过程中，变量和函数命名仍存在一定的随意性，未始终遵循清晰、简洁、具有自解释性的原则。 | 严格遵循 PEP 8 命名规范，确保所有变量、函数和方法名都能准确反映其功能和意图，实现**命名即文档**。 |

### 以上是个人总结(bushi)

### ~~以下是ai总结~~
- 减少了神类和神函数
- 终于又写出了一个不完全是shi山的代码(~~不是shi山其实是因为还没写啥东西~~)
- 符合兴趣 !(重点)
--------
### 2025/11/23 分离模块，初步进行功能分离
- 学习csv与pd dataframe对于csv数据的处理，理解dataframe对于索引，值，排序
- 将策略模块初步分离，并尝试减少功能杂糅

### 2025/11/25 复习pyqt的ui布局,复习其与tkinter的差异,理解pyqt组件，布局之间的关系和伸展器的使用
- 完成基础ui界面,准备进行策略回测的解耦，通过全局Config完成对接
- 理解了过度分块造成的问题，理解了不同模块直接的使用需要一个共同的Config
- 完成回测模块的解耦，移除经常数据粘合对象的情况，仅在调用时候赋予
- 完成了ui选择币对和k线周期，k线数量的功能


### 2025/11/26 完成本地保存csv部分内容
- 对本地保存数据csv做出修改和调整
- 寻找卡死ui主线程的罪魁祸首，修改部分影响线程的bug
- 使得更多配置解耦

## 阿尔法a0.2:明确下一目标:减少数据量请求次数减少api封禁和完成策略信号判断的精确基础
- TODO1:完成本地localdata的创建，仅获取1min k线数据,其他时间段可以基于最小时间进行拼接，目的是为策略回测提供更精确的位置判断
- TODO2:对回测模块升级，构建策略独立与仓位独立的统一处理模块
- TODO3:API功能过于复杂,分离数据处理模块

### 2025/11/29 完成程序修改和最小k线数据获取
- 封装了check_path函数用于检查并创建文件
- 为Config常量提供类型注解
- 修改api请求参数时get_future_data中 start_time与end_time与limit逻辑冗余和可能错误问题,移除end_time
- 探究每次拼接dataframe和list最后一次性拼接的性能问题,最终保持使用list存放内存，最后一次拼接
- 使用倒序+插入+动态调整替代提前计算，从逻辑上避免时间极限导致的数据重复


### 2025/11/30 修改逻辑和完善本地localdata的读写操作
- API>_init_data的数据循环中,下次循环调用初始时间调用完全基于上次,理论上可以避免因为网络问题造成的一次数据丢失问题
- 修改为end_time向前循环获取数据,完成_init_data基础逻辑
- 标定部分功能待更改和废弃

### 2025/12/1 学习SQLite,准备迁移数据localdata至SQLite优化数据结构
- 完整了csv下的数据读写更新操作
- 了解sqlite
- 对时区印象加深


### 2025/12/3 初步建立sqlite系统
- 初步建立sqlite_oper对数据库的操作
- 认识了sqlite数据库

### 2025/12/4 建立sqlite的数据更新与数据初始化函数
- 完成sqliteOper的初始化数据库函数和更新函数
- 了解了多轻量数据库和单轻量数据库多表的区别和不同

### 2025/12/7 进一步加深数据库操作的理解和pandas数据处理的内容,学习logging替代print输出信息
- 理解了数据库添加时pd.dataframe中对于timestamp的纳秒储存与数据库的毫秒储存之间的差异
- 理解了pandas的to_sql函数的局限和原生数据库操作的insert or replace的区别
- 使用了type中cast类型断言函数来避免编译器自判断的宽泛类错误
- 受到了utc调和时间和本地时间混用的制裁，理解utc世界调和时间和本地时间混用造成的问题
- 受到了数据库数据类型和插入的制裁，修复了初始化和更新问题
- 践行只在信息展示时使用本地化时间，所有时区交互保存全部使用utc世界调和时间
- tz_convert转换只能用于时区感知的timestamp,必须在创建对象时设置utc=True
- 修改模块命名，使其符合下划线分段法而不是驼峰法
- 

## 阿尔法a0.3:学习logging替代print代替程序日志,使用pySign更新前端ui数据进度,完善不同时长k线的组合
- TODO:使用logging标准库分块代替print打印程序日志，增强程序错误修改能力
- TODO:将前端UI界面的反馈与各模块进度使用pyqtsign连接，使得程序实现前端可视化数据进度
- TODO:基础数据集建立与前端UI的连接,完成不同时长k线的组合

### 2025/12/7 学习logging
- 学习logging，了解logger创建流程，了解debug，info和输出流，替代print打印信息
- 使用info与debug替代sqlite_oper部分print控制台输出
- 借助ai完成api模块的logging替代，并删减部分ai提供的过于繁琐的logging输出
- 需要进一步学习logging的更多自定义方法和适应logging的复杂输出和信息轰炸


### 2025/12/8 修改logging与信息健硕,学习github进阶指令,添加不同k线的聚合写入
- 将部分info信息降级为debug
- 添加大量变量可能为None的logger信息
- 尝试使用logging修复了时间跨度的输出在数据保存前就被调用导致返回None使得程序连环报错问题
- 学习了issus的使用，逻辑和目的，再次理解分支，合并分支的含义和作用
- 完成了k线聚合模块，解耦数据库操作相关操作
- 貌似带有标号的logging在单线程具有插print的作用，其作用大于语句间写入


### 2025/12/12 数据聚合模块完成，开始提高回测模块和策略模块的可拓展性
- 去除初始化表的错误检查，将所有表操作都检查初始化
- 修复数据聚合表丢失的问题
- 解耦数据，逻辑改为策略自行调用数据库获取数据而不是回测平台提供数据


### 2026/1/2 完成策略端的dataServer,对sql进行小幅度解耦
- 理解了python对相对目录和绝对目录的处理
- 使得策略能更好的选取范围获取数据